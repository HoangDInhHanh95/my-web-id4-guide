<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chuyên gia nói về ID-4 Solution</title>

    <style>
        /* --- CÀI ĐẶT CHUNG --- */
        
         :root {
            --primary-color: #007bff;
            --primary-dark-color: #005aab;
            --light-bg-color: #f8fcff;
            --text-color: #555;
            --card-bg-color: #ffffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--card-bg-color);
        }
        /* --- COMPONENT TESTIMONIALS --- */
        
        .testimonials-section {
            width: 100%;
            padding: 80px 20px;
            background-color: var(--light-bg-color);
            text-align: center;
        }
        
        .testimonials-section__title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-dark-color);
            text-transform: uppercase;
            margin-bottom: 60px;
        }
        
        .testimonials-section__container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }
        
        .testimonials-section__grid {
            /* Mặc định là layout grid cho desktop */
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 50px;
        }
        
        .testimonial-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
        }
        
        .testimonial-item__card {
            width: 100%;
            border: 2px solid var(--primary-color);
            border-radius: 16px;
            padding: 40px 25px 35px;
            position: relative;
            background-color: var(--card-bg-color);
            text-align: center;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }
        
        .testimonial-item__card::after {
            content: '';
            position: absolute;
            bottom: -34px;
            left: 75%;
            transform: translateX(-50%);
            width: 40px;
            height: 35px;
            background-image: url("data:image/svg+xml,%3Csvg width='40' height='35' viewBox='0 0 40 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0L20 35L40 0H0Z' fill='%23007bff'/%3E%3Cpath d='M2.5 0L20 31.5L37.5 0H2.5Z' fill='white'/%3E%3C/svg%3E");
        }
        
        .testimonial-item__quote-icon {
            position: absolute;
            top: 10px;
            left: 20px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 6rem;
            color: #dbe9fa;
            z-index: 0;
        }
        
        .testimonial-item__text {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-color);
            position: relative;
            z-index: 2;
            text-align: justify;
        }
        
        .testimonial-item__author {
            margin-top: 35px;
        }
        
        .testimonial-item__avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            background-color: #e9efff;
        }
        
        .testimonial-item__name {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-dark-color);
        }
        /* --- SLIDER CONTROLS (NAVIGATION & PAGINATION) --- */
        
        .slider-controls {
            display: none;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-top: 40px;
        }
        
        .slider-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 24px;
            cursor: pointer;
            transition: background-color 0.3s;
            flex-shrink: 0;
        }
        
        .slider-btn:hover {
            background-color: var(--primary-dark-color);
        }
        
        .slider-pagination {
            display: flex;
            gap: 10px;
            margin: 0 20px;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #ccc;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .dot.active {
            background-color: var(--primary-color);
        }
        /* --- RESPONSIVE --- */
        
        @media (max-width: 767px) {
            .testimonials-section {
                padding: 50px 15px;
            }
            .testimonials-section__title {
                font-size: 1.8rem;
                margin-bottom: 40px;
            }
            .testimonial-slider {
                overflow: hidden;
                width: 100%;
            }
            .testimonials-section__grid {
                display: flex;
                grid-template-columns: none;
                gap: 0;
            }
            .testimonials-section__grid.is-transitioning {
                transition: transform 0.4s ease-in-out;
            }
            .testimonial-item {
                flex: 0 0 100%;
                padding: 0 5px;
            }
            .slider-controls {
                display: block;
                text-align: center;
            }
            .slider-pagination {
                display: inline-flex;
            }
            .slider-btn {
                position: absolute;
                top: 40%;
                transform: translateY(-50%);
                z-index: 10;
                /* CẬP NHẬT: Ẩn nút mặc định và thêm hiệu ứng */
                opacity: 0;
                visibility: hidden;
                transition: opacity 0.3s ease-in-out;
            }
            /* CẬP NHẬT: Hiện nút khi hover vào container */
            .testimonials-section__container:hover .slider-btn {
                opacity: 1;
                visibility: visible;
            }
            .slider-btn.prev {
                left: 0;
            }
            .slider-btn.next {
                right: 0;
            }
        }
    </style>
</head>

<body>

    <section class="testimonials-section">
        <h2 class="testimonials-section__title">Chuyên gia nói gì về ID-4 Solution</h2>

        <div class="testimonials-section__container">
            <div class="testimonial-slider">
                <div class="testimonials-section__grid">
                    <!-- Testimonial 1 -->
                    <div class="testimonial-item">
                        <div class="testimonial-item__card">
                            <div class="testimonial-item__quote-icon">“</div>
                            <p class="testimonial-item__text">Tôi đã sử dụng hệ thống màng hướng dẫn phẫu thuật của trung tâm ID4 từ năm 2020 cho đến nay và vô cùng hài lòng với chất lượng của sản phẩm. Nhờ hệ thống màng hướng dẫn chính xác, việc thực hiện các ca phẫu thuật cấy ghép Implant
                                đã trở nên nhanh chóng và an toàn hơn rất nhiều.</p>
                        </div>
                        <div class="testimonial-item__author">
                            <img src="https://placehold.co/100x100/E9EFFF/3B82F6" alt="Bác sĩ Xuân" class="testimonial-item__avatar">
                            <p class="testimonial-item__name">Bác sĩ Xuân</p>
                        </div>
                    </div>
                    <!-- Testimonial 2 -->
                    <div class="testimonial-item">
                        <div class="testimonial-item__card">
                            <div class="testimonial-item__quote-icon">“</div>
                            <p class="testimonial-item__text">Chất lượng sản phẩm vượt trội, dịch vụ hỗ trợ của ID4 Solution rất chuyên nghiệp. Tôi hoàn toàn tin tưởng khi giới thiệu cho các đồng nghiệp của mình. Các ca cấy ghép phức tạp trở nên đơn giản hơn rất nhiều.</p>
                        </div>
                        <div class="testimonial-item__author">
                            <img src="https://placehold.co/100x100/E9EFFF/3B82F6" alt="Bác sĩ An" class="testimonial-item__avatar">
                            <p class="testimonial-item__name">Bác sĩ An</p>
                        </div>
                    </div>
                    <!-- Testimonial 3 -->
                    <div class="testimonial-item">
                        <div class="testimonial-item__card">
                            <div class="testimonial-item__quote-icon">“</div>
                            <p class="testimonial-item__text">Hệ thống màng hướng dẫn phẫu thuật của ID4 không chỉ chính xác mà còn giúp rút ngắn đáng kể thời gian phẫu thuật, mang lại sự thoải mái tối đa cho bệnh nhân. Đây là một bước tiến lớn trong ngành.</p>
                        </div>
                        <div class="testimonial-item__author">
                            <img src="https://placehold.co/100x100/E9EFFF/3B82F6" alt="Bác sĩ Minh" class="testimonial-item__avatar">
                            <p class="testimonial-item__name">Bác sĩ Minh</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="slider-controls">
                <button class="slider-btn prev" aria-label="Previous testimonial">&#8249;</button>
                <div class="slider-pagination"></div>
                <button class="slider-btn next" aria-label="Next testimonial">&#8250;</button>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sliderContainer = document.querySelector('.testimonial-slider');
            if (!sliderContainer) return;

            const grid = sliderContainer.querySelector('.testimonials-section__grid');
            const nextBtn = document.querySelector('.slider-btn.next');
            const prevBtn = document.querySelector('.slider-btn.prev');
            const paginationContainer = document.querySelector('.slider-pagination');

            let originalItems = Array.from(grid.querySelectorAll('.testimonial-item'));
            if (originalItems.length <= 1) return;

            const AUTOPLAY_DELAY = 4000;
            let currentIndex = 1;
            let autoPlayInterval;
            let isTransitioning = false;
            let sliderInitialized = false;

            // CẬP NHẬT: Thêm biến cho chức năng vuốt
            let touchStartX = 0;
            let touchEndX = 0;

            function setupSlider() {
                const firstClone = originalItems[0].cloneNode(true);
                const lastClone = originalItems[originalItems.length - 1].cloneNode(true);
                grid.appendChild(firstClone);
                grid.prepend(lastClone);

                grid.style.transform = `translateX(-${currentIndex * 100}%)`;

                originalItems.forEach((_, index) => {
                    const dot = document.createElement('div');
                    dot.classList.add('dot');
                    dot.addEventListener('click', () => {
                        if (isTransitioning) return;
                        currentIndex = index + 1;
                        moveToSlide();
                        resetAutoplay();
                    });
                    paginationContainer.appendChild(dot);
                });

                nextBtn.addEventListener('click', () => {
                    if (isTransitioning) return;
                    moveToNext();
                    resetAutoplay();
                });
                prevBtn.addEventListener('click', () => {
                    if (isTransitioning) return;
                    moveToPrev();
                    resetAutoplay();
                });
                grid.addEventListener('transitionend', handleTransitionEnd);

                // CẬP NHẬT: Thêm event listeners cho chức năng vuốt
                grid.addEventListener('touchstart', handleTouchStart);
                grid.addEventListener('touchend', handleTouchEnd);


                startAutoplay();
                sliderContainer.addEventListener('mouseenter', stopAutoplay);
                sliderContainer.addEventListener('mouseleave', startAutoplay);

                updatePagination();
            }

            // CẬP NHẬT: Các hàm xử lý sự kiện vuốt
            function handleTouchStart(e) {
                if (isTransitioning) return;
                touchStartX = e.touches[0].clientX;
            }

            function handleTouchEnd(e) {
                if (isTransitioning) return;
                touchEndX = e.changedTouches[0].clientX;
                handleSwipe();
            }

            function handleSwipe() {
                const swipeThreshold = 50; // Khoảng cách vuốt tối thiểu
                if (touchStartX - touchEndX > swipeThreshold) {
                    // Vuốt sang trái
                    moveToNext();
                    resetAutoplay();
                } else if (touchEndX - touchStartX > swipeThreshold) {
                    // Vuốt sang phải
                    moveToPrev();
                    resetAutoplay();
                }
            }


            function moveToSlide() {
                isTransitioning = true;
                grid.classList.add('is-transitioning');
                grid.style.transform = `translateX(-${currentIndex * 100}%)`;
                updatePagination();
            }

            function moveToNext() {
                currentIndex++;
                moveToSlide();
            }

            function moveToPrev() {
                currentIndex--;
                moveToSlide();
            }

            function handleTransitionEnd() {
                isTransitioning = false;
                if (currentIndex === 0) {
                    grid.classList.remove('is-transitioning');
                    currentIndex = originalItems.length;
                    grid.style.transform = `translateX(-${currentIndex * 100}%)`;
                }
                if (currentIndex === originalItems.length + 1) {
                    grid.classList.remove('is-transitioning');
                    currentIndex = 1;
                    grid.style.transform = `translateX(-${currentIndex * 100}%)`;
                }
            }

            function updatePagination() {
                let activeIndex = currentIndex - 1;
                if (currentIndex === 0) {
                    activeIndex = originalItems.length - 1;
                } else if (currentIndex === originalItems.length + 1) {
                    activeIndex = 0;
                }

                const dots = paginationContainer.querySelectorAll('.dot');
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === activeIndex);
                });
            }

            function startAutoplay() {
                stopAutoplay();
                autoPlayInterval = setInterval(() => {
                    if (!isTransitioning) moveToNext();
                }, AUTOPLAY_DELAY);
            }

            function stopAutoplay() {
                clearInterval(autoPlayInterval);
            }

            function resetAutoplay() {
                stopAutoplay();
                startAutoplay();
            }

            function destroySlider() {
                stopAutoplay();

                const newNextBtn = nextBtn.cloneNode(true);
                nextBtn.parentNode.replaceChild(newNextBtn, nextBtn);
                const newPrevBtn = prevBtn.cloneNode(true);
                prevBtn.parentNode.replaceChild(newPrevBtn, prevBtn);

                grid.removeEventListener('transitionend', handleTransitionEnd);
                sliderContainer.removeEventListener('mouseenter', stopAutoplay);
                sliderContainer.removeEventListener('mouseleave', startAutoplay);
                // CẬP NHẬT: Xóa event listeners của chức năng vuốt
                grid.removeEventListener('touchstart', handleTouchStart);
                grid.removeEventListener('touchend', handleTouchEnd);

                grid.innerHTML = '';
                originalItems.forEach(item => grid.appendChild(item));
                paginationContainer.innerHTML = '';

                grid.style.transform = '';
                grid.classList.remove('is-transitioning');
            }

            const mobileMediaQuery = window.matchMedia('(max-width: 767px)');

            function handleDeviceChange(e) {
                if (e.matches) {
                    if (!sliderInitialized) {
                        setupSlider();
                        sliderInitialized = true;
                    }
                } else {
                    if (sliderInitialized) {
                        destroySlider();
                        sliderInitialized = false;
                    }
                }
            }

            mobileMediaQuery.addEventListener('change', handleDeviceChange);
            handleDeviceChange(mobileMediaQuery);
        });
    </script>
</body>

</html>